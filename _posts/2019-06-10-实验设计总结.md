# 实验设计总结

标签（空格分隔）： 统计 期末 总结

---
layout:     post
title:      实验设计期末复习
subtitle:   我学了点啥
date:       2019-06-06
author:     Susie
header-img: img/post-bg-2015.jpg
mathjax: true
catalog: true
tags:
    - 统计
    - 期末
    - 总结
---

## 一、实验设计概述

### 实验设计类型

- 演示实验
- 验证实验
- 比较实验
- 优化实验
    - 实验因素数目：单因素优化、多因素优化
    - 实验目的：指标水平优化（优化均值）、稳健性优化（减小方差）
    - 实验形式：实物实验（现场实验、实验室实验）、计算实验
    - 实验过程：
     - 序贯实验（爬山法） 0.618法、分数法、因素轮换法
     - 整体设计实验 正交设计、均匀设计
- 探索实验

### 实验设计的三要素四原则

三要素：实验因素、实验单元和实验效应
四原则：随机化、重复、（对照、区组） 后两个是局部控制原则

实验设计的核心是用最少的样本例数保证实验结果具有一定的可信度，以节约人力、经费和时间

重复：独立重复实验+重复测量

对照：空白对照、安慰剂对照、标准对照、历史和中外对照

**区组原则是核心**，区组设计属于两因素或多因素设计，按照有没有区组，可以划分成随机区组设计和完全随机设计

平衡设计：实验的各处理和各区组内的实验次数都相同时称为平衡设计

## 二、比较实验和方差分析

### 两个处理的水平对比：t检验

#### 正确选择检验条件
选择：单边检验还是双边检验（单侧检验效率高）；等方差还是异方差
（等方差效率高）
不平衡实验用异方差和等方差计算出的t统计量的值是不一样的，平衡试验中数值相同，但是自由度不同。

方差齐性：平衡设计效率最高；方差不相等：方差大的分配更多样本量
方差分析的**前提假设是方差齐性**

#### 样本量问题

小样本：只要满足随机化原则，正态假设无所谓，因为非参数方法结果和t检验的结论是类似的。需要关注方差假设，效率差异较大。

大样本：虽然可能不是正态假设，但是统计量服从中心极限定理，结果是类似的。样本量大检验效率高；但是需要**关心差异的大小**。大样本时，方差假设效率类似，推荐使用异方差。

### 方差分析
F统计量 = 因素均方/误差均方
出现不显著的时候，增大样本量；把最不显著的删掉【均方小于误差项的均方，p大于0.2】，增加误差项的自由度，提高检验的效率。

## 三、单因素优化实验设计【优选法】
具体用什么方法和实验目标、实验指标的函数形状、实验的成本经费有关。
### 均分法
等距离安排实验点。
优点：

- 对目标函数没有先验认识
- 了解目标函数的相关信息（单调性、多峰等）
- 确定有效的试验范围
- 实验可以同时进行（整体设计）

缺点：

-  成本较高

### 对分法
也叫等分法、平分法、像二分查找、属于序贯实验
优点：

- 速度快、效率高
- 不需要指标是连续的定量指标，能比较大小关系即可

缺点：

- 要求单调函数

### 黄金分割法【0.618法】
由华罗庚大力推行，属于序贯实验，属于来回调试
步骤：
找两个对称点，这两个对称点的位置决定了效率，比较两个点哪个点是好点，删掉不好的区间。
优点：

- 简单高效
- 单峰函数，适用广泛【单调函数可以用$\vert y-0.5\vert$转化成单峰函数】
- 不需要指标是连续的定量指标，定序即可

缺点：

- 要求单峰函数
- 要求实验的因素**水平**可以准确度量

### 分数法
接口数目是整数，利用斐波那契数列。n大的时候，和黄金分割法效率差不多。

**需要在最低水平下加一个虚拟的零水平**，使实验具有对称性。
操作：
当因素水平数m是斐波那契数列的时候，0水平在左边，第一次实验安排在$F_{n-1}$和$F_{n-2}$上；

当因素水平书不是斐波那契数列的时候，需要在实验的两端加虚拟水平，安排实验，具体的水平就是端点的水平。

优点：

- 适用于单峰函数
- 适用于因素水平有限或者是整数


缺点：

- 和黄金一样，效率没有对分法高。

### 分批试验法

步骤：
例：序贯实验中斐波那契第一次试验点13,21，第二次的结果只有可能是8,13,21,26四个点，所以直接合并这几个点即可，第一次做四个实验。

优点：

- 多个实验同时进行，减少实验周期
- 辅助方法，和前面几个不冲突

## 四、多因素优化实验设计
筛选因素的方法:
1.依靠专业知识
2.做筛选实验

设计实验的选择：
1. 实验因素数量适中
2. 实验因素水平范围尽可能大
3. 因数的水平数量要多
4. 试验指标要计量，能定量就别分类

### 因素轮换法【单因素轮换法】

缺点：

- 只适用于因素之间没有交互关系的情况。
- 实验的结果收到起始点的影响

优点：

- 实验次数少，是各因素水平之和
- 实验指标不能量化的时候也可以用
- 属于爬山实验法【序贯设计】，不断离目标更近
- 因素的水平数可以不同

### 随机实验
随机化：为了保证实验具有代表性；均匀性：结合随机性和区组性，更好得保障代表性，效率更高
随机试验：按照随机化的原则选择试验点或者实验因素水平。

- 要求
    - 实验单元随机化
    - 实验顺序随机化
    - 试验点随机选取
    - 随机布点，因素水平随机选取【特别是实验水平无法控制，水平间有约束关系的时候】
-  特点&优点
    -  不要求实验指标是量化的，对目标函数也没有约束
    -  可以作为整体设计，也可以边做边看，灵活度高
    -  因素水平数目可以不同
    -  适用范围广
- 缺点
    - 使用效率低
    
### 拉丁方【两向区组设计】【被正交设计替代】
对于阶数大于3的拉丁方，标准拉丁方是不唯一的。
可以安排只有一个处理因素和两个区组因素或者三个处理因素。

## 五、正交设计
实验次数:至少数因素水平数的平方。正交性：均匀分散性(每列中不同数字出现概率相同)、整齐可比性（任意两列的有序数对出现的次数相同）。
正交设计表：$L_m(a^p)$，水平数a,因素个数p，m次实验
常见的表格：$L_4(2^3),L_8(2^7)$

正交表的特点：任意两行、任意两列和每列中的数字之间可以任意交换

### 正交表安排实验
选择正交表：选择因素水平相同的实验、因素个数不能超过正交表列、可以有空白列。
最实验的顺序要按照随机化原则，可以抽签决定。

### 分析实验结果

- 直观分析
    - 直接看最好的因素组合
    - 计算每个水平的采收均值
    - 分析极差，认为极差大的因素比较重要
    - 画趋势图
    - 成本分析。选择水平数低的
    - 综合分析与细撒网，安排补充实验【可以不做】
    - 验证试验，对理论最优实验进行验证
- 方差分析
    - 计算$SST = \sum(y_i-\bar{y})^2$
    - 计算SSA.SSB.SSC $\sum n_i(T_i - \bar{y})^2$ 对每个水平，用这个水平下实验的均值减去总体均值，乘上计算$T_i$时用到的实验数据。
    - 计算误差平方和SSE
        - 用空白列计算。计算每个空白列的离差平方和相加。
        - 用公式计算。通用方法。SST-因素的平方和加和。
        - 适用：有些正交表不满足平方和分解式，此时空白列的离差平方和比正常的要小，自由度偏小，会降低方差分析的效率，让显著的变成不显著。
### 有交互作用的正交设计

表头设计：在有交互作用的时候，要用正交表附带的交互作用表查出交互作用表所在的列，安排实验因素和交互作用。

根据实验结果，计算水平搭配表。
### 水平不等的正交设计

1. 可以用混合水平正交表安排实验
2. 改造正交表

- 并列法：把2水平和三水平列合并成6水平列【要去掉交互作用在的那列】，有正交性
- 拟水平法：对于缺的，补一个虚拟水平，无正交性，不能用空白列
- 组合法：把一个三水平列拆分成2个两水平列，没有正交性

### 独立重复实验
实验的重复性体现在对多个处理可以获取实验指标的多个数据。
1. 相同操作独立重复实验-简单容易实行，常用方法。
2. 随机顺序独立重复实验- 重新准备实验条件。 - 本书认为的

重复试验：SST>列的离差平方和之和。差称作纯误差平方和SSEP。

### 筛选试验
筛选试验中，不考虑因素之间的交互作用，减少实验次数，通常取实验次数为2。

两水平因素的选取方法原则：其中一个水平在中心位置【主观上的最佳取值】，另外一个在边界位置【离中心比较远】。

### 平衡不完全区组设计
1. 原材料的批次和数量足够多，随机取4个批次，用拉丁方
2. 批次比较少，每次数量足够多，用尤登方设计
3. 批次很多，但是每批只能做3个试验，用平衡不完全区组设计


## 六、均匀设计
**因素数量小于实验次数的一半**
方开泰和王元提出，牺牲整齐可比性。优点：在因素数目较多的时候实验次数也不多，是因素水平书的倍数而非平方。缺点：不能做直观分析，需要用回归分析。

加*的设计表有更好的均匀性，应该优先使用。D偏差越小，均匀度越好。
### 均匀设计表的构造
$U_n(n^s)$
1. 第一行 所有元素和实验次数n互素。列数s就是互素的元素个数。
2. 表的其他行由第一行生成。表的第k行第j列的数字就是$kh_jmod n$的余数,hj是第一行第j列的数字。
3. 最后一行都是水平n构成，可能会出事

加*的均匀设计表
加*的U6是U7去掉最后一行构成的

### 实验结果的分析
当效果不够好的时候，先使用多元线性回归，再使用多项式回归。

有定性变量的时候，采用伪变量法

### 配方均匀设计
使用$U_n(n^{s-1})$,配方均匀设计中有s种原料。配方均匀设计的步骤：

1. 找到合适的均匀设计表
2. 计算$c_{kj} = \frac{u_{ij}-0.5}{n}$第k个试验的第j个因素
3. 计算$g_{kj} = \sqrt[s-j]{c_{kj}}$
4. 计算$x_{kj}=g_{k1}g_{k2}\cdots g_{k,j-1}(1-g_{kj})$
5. 用$UM_n(n^s)$表示n次实验s种原料的配方均匀设计。

### 有约束的配方

-  填补法：当一个因素含量高的时候，可以分别把剩下两个当成单因素优化，然后用1-x2-x3计算得到x1的含量
-  随机布点法：产生随机数，如果随机数在实验取值范围内，作为备选值；重复得到实验组合

## 七、稳健性设计

### 稳健性
噪声：内部噪声、零件间噪声、内部噪声，稳健性设计的目的就是尽量减少质量变异，设计出稳健可靠的产品。
目的：尽量减少质量变异，设计出稳健可靠的产品
**稳定性：**恢复到正常状态的能力

### 三次设计
系统设计、参数设计、容差设计
1. 系统设计：专业人员确定实验目的等实验主要因素
2. 参数设计：探求因素水平的最佳搭配：平均水平达到设计要求；稳健性要求【内表设计编排实验方案，外表设计确定噪声因素安排，噪声实验，信噪比分析产品的稳健性】外表设计需要实验次数多**，可计算项目**适合用采用内外表设计，费用高的时候可以用综合噪声法。
3. 容差设计：构成产品的元件和生产产品的工艺条件【公差的一半叫容差】。本着总损失最小的原则，对稳健性影响小的因素公差应该大，对稳健性影响大的因素公差小。容差设计在参数设计的基础上进行的，需要**建立容差与损失的定量关系。**主要用于可计算项目。如果参数设计做得好，也可以不用容差设计。
系统设计是基础，参数设计是核心，容差设计是经济化。

损失函数和信噪比
降低平均损失
1. 稳健设计 减少标准差
2. 灵敏度设计 寻找调节因素，在不断减少变异程度的情况下，把实验指标调整到目标值。

信噪比
信噪比越大，产品越稳健。
望目质量，希望相对误差的角度考虑。
望小质量特性
望大质量特性

对每一种因素大批方式，分别安排噪声实验，计算信噪比。主要用于可计算项目。

**调节因子** 对信噪比没有显著影响但是对实验指标有显著影响的因素。

### 内外表参数设计

1. 直积内外表
  首先对**可控因素**安排一个正交实验，然后对每一个实验考虑噪声的水平，称为外表实验。

以信噪比作为响应变量进行方差分析。

### 综合噪声法

不管有多少噪声，把噪声总合成2水平的综合噪声因素的方法，称为综合噪声法。两个水平：负侧最坏水平-让产品性能指标达到最小值，正侧最坏水平-让产品性能指标达到最大值。

### 简单的稳健设计方法

多变量图方法。

## 八、可靠设计与寿命实验
可靠性：在规定的条件下和规定的时间内完成规定功能的能力
可靠度：完成规定功能的概率
累计故障分布函数
故障率函数：瞬时故障率（失效率）$\lambda(t) = \frac{f(t)}{R(t)}=\frac{f(x)}{1-F(x)}$
动态地反应产品失效的速度。
指数分布：故障率好平均寿命互为倒数.

平均失效前时间 MTTF
平均故障间隔时间MTBF
平均秀谷回见
储存寿命：规定条件下存储是满足规定质量要求的时间长度
浴盆曲线：产品故障率

- 早期故障期
- 偶然故障期 随机失效期，是工作的最好时期
- 耗损故障期

预先筛选实验：厂家设定规定故障率，在早期故障期筛掉一部分产品。

### 应力-可靠度设计
1. 可靠度安全系数法
2. 可靠度概率计算法
安全系数：把零件的强度和应力看做固定常量，把比值当做安全系数
优点：简便易行
缺点： 应力、强度常量和实际不符；安全系数数值意义不明确，导致产品成本增加，影响市场竞争力。

可靠度概率：看成随机变量，时间t的函数W=S-L是绝对裕度。$
\mu =\frac{u_s-u_l}{\sqrt{\sigma_s^2+\sigma_l^2}} $是链接方程，可靠度系数。

安全系数法过于保守，后者依赖于轻度和应力概率分布正确性，比较难。

可靠性分配：是按数据、薄弱环节对资源进行权衡分配。

可靠性试验种类

- 寿命试验
- 环境应力实验
- 筛选试验
- 整机可靠性鉴定试验 【寿命试验】
- 整机可靠性验实验
- 可靠性增长实验 暴露产品薄弱环节

### 寿命试验

### 生存分析

Cox模型、逆幂率模型
## 九、析因设计

全面试验：主效应、交互效应、需要实验次数很大。
部分因子设计：优先缔结，然然后高阶。
分层模型：交互效应包含一切。只能分析主效应和部分交互效应：存在混杂。分辨率越低，混杂程度越大。